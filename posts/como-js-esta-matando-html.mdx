---
path: /como-js-esta-matando-html
title: Como o JavaScript está matando o HTML
date: 2020-11-03
episode: "Post #1"
cover: https://images.unsplash.com/photo-1542831371-29b0f74f9713?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80
author_name: "Marina F. Andrade"
author_email: "andrademfonseca@gmail.com"
highlight: true
---

> Esse post é uma tradução livre [deste artigo do CSS-tricks](https://css-tricks.com/why-javascript-is-eating-html/).

Desenvolvimento web está em constante mudança. Uma tendência em particular se tornou bastante popular nos últimos tempos, e vai fundamentalmente contra o conhecimento convencional sobre como uma web pages deve ser feita. É empolgante para alguns e frustrante para outros, e as razões para ambos são difíceis de explicar.

Uma web page é tradicionalmente compostas por três partes distintas com responsabilidades distintas: **código HTML** define a estrutura e significado do conteúdo da página, **código CSS** define a aparência desse conteúdo, e **código JavaScript** define o seu comportamento. Em times com designers designados, desenvolvedores HTML/CSS, e desenvolvedores JavaScript, essa [separação de conceitos](https://pt.wikipedia.org/wiki/Separação_de_conceitos) se alinha perfeitamente ao papel de cada integrante: Designers determinam o aspecto visual e interações do usuário em uma página, desenvolvedores HTML e CSS reproduzem o design em um browser, e desenvolvedores JavaScript adicionam as interações do usuário para arrematar o processo e “fazer funcionar”. Uma pessoa pode trabalhar em uma dessas partes sem se envolver com todas as três.

Recentemente, desenvolvedores JavaScript perceberam que, ao definir a estrutura da página em Javascript no lugar de HTML (usando frameworks como [React](https://pt-br.reactjs.org/)), eles puderam simplificar o código de desenvolvimento e manutenção das interações do usuário que, de outro modo, seriam muito mais complexas para serem montadas. Claro, quando se diz a alguém que o HTML que ele escreveu precisa ser refatorado e misturado com um JavaScript de que ele nem tem notícia, ele pode (compreensivelmente) ficar frustrado e começar a questionar que diabos nós estamos ganhando com isso.

Como um desenvolvedor JavaScript em uma equipe multifuncional, de vez em quando eu recebo esse questionamento e com frequência tenho dificuldade de responder. Todos os materiais que eu encontrei sobre o assunto foram escritos para um público que já está familiarizado com JavaScript - o que não é exatamente útil para quem tem foco em HTML e CSS. Mas esse padrão **HTML-in-JS** (ou algum outro que traga os mesmos benefícios) provavelmente vai estar em voga por um tempo, então acho fundamental que todos que atuam no desenvolvimento web consigam entender.

Este artigo vai incluir exemplos de código para os interessados, mas meu objetivo é explicar o conceito de um jeito que eles não sejam necessários para o seu entendimento.


### Background: HTML, CSS and JavaScript

Para tornar esse artigo o mais acessível possível, eu gostaria de dar um contexto rápido dos tipos de código envolvidos na criação de uma web page e seus papéis tradicionais. Se você já tem experiência com isso, pode pular para o próximo tópico.


### HTML é usado para estrutura e semântica

O código HTML (HyperText Markup Language) define a estrutura e sentido do conteúdo da página. Por exemplo, o HTML deste artigo contem o que texto que você está lendo agora, o fato de ser um parágrafo, e também o fato de que vem depois de um *heading* e antes de um CodePen.

Suponhamos que nós queremos criar um app simples para listas de compras. Nós podemos começar com um HTML como esse:

<iframe height="265" style="width: 100%;" scrolling="no" title="Barebones HTML example (no CSS or JS)" src="https://codepen.io/mturley/embed/ExaoyRG?height=265&theme-id=dark&default-tab=html,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/mturley/pen/ExaoyRG'>Barebones HTML example (no CSS or JS)</a> by Mike Turley
  (<a href='https://codepen.io/mturley'>@mturley</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

Nós podemos salvar esse código em um arquivo, abrí-lo em um browser e esse browser vai mostrar o resultado renderizado. Como podemos ver, o código HTML neste exemplo representa a seção da página que contém um *heading* onde se lê “Shopping List (2 items)”, uma caixa de input , um botão que diz “Add Item”, e uma lista com dois itens “Eggs” e “Butter”. Em um site tradicional, o usuário navegaria para um endereço em seu browser, e então requisitaria esse HTML do servidor, faria o load e o display. Se já existirem itens na lista, o servidor devolveria o HTML com os itens já em seu devido lugar, como os do exemplo.

Tente digitar algo na caixa de input e clicar no botão “Add Item”. Você vai notar que nada acontece. O botão não está conectado a qualquer código que possa alterar o HTML, e o HTML não se muda sozinho. Chegaremos nisso mais adiante.


### CSS é para aparência

O código CSS (Cascading Style Sheets) define a aparência da página. Por exemplo, o CSS deste artigo contêm a fonte, espaçamento e cor do texto que você está lendo.

Você deve ter notado que a lista de compras do exemplo acima tem a aparência bem crua. O HTML não consegue especificar coisas como espaçamento, tamanho das fontes, e cores. É aí onde entra o CSS (Cascading Style Sheets). Na mesma página HTML acima, nós podemos adicionar código CSS para estilizar um pouco as coisas.

<iframe height="265" style="width: 100%;" scrolling="no" title="Barebones HTML+CSS example (no JS)" src="https://codepen.io/mturley/embed/dyPJXjb?height=265&theme-id=dark&default-tab=html,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/mturley/pen/dyPJXjb'>Barebones HTML+CSS example (no JS)</a> by Mike Turley
  (<a href='https://codepen.io/mturley'>@mturley</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

Como você pode ver, esse CSS mudou o tamanho e valor da fonte, e deu uma belo background colorido à seção (designers, por favor não me mandem DM, eu sei que isso continua feio). Um desenvolvedor consegue escrever regras de estilos como essas e elas serão consistentemente aplicadas a qualquer estrutura HTML: se adicionarmos mais elementos `<section>`, `<button>` ou `<ul>` a essa página, as mesmas alterações de fontes serão aplicadas a eles.

Mas ainda, o botão não faz nada: é aí onde entra o JavaScript.


### JavaScript é para comportamento

O código JavaScript define o comportamento de elementos interativos ou dinâmicos em uma página. Por exemplo, os exemplos do CodePen embedados neste artigo são suportados pelo JavaScript.

Sem JavaScript, para fazer o botão “Add Item” do nosso exemplo funcionar, teríamos que utilizar HTML especial para enviar dados de volta para o servidor ( `<form action=”...”>`, se você ficou curioso). Assim, o browser iria descartar toda a página e faria o reload da versão com update de todo o arquivo HTML. Se essa lista de compras fosse parte de uma página maior, qualquer outra coisa que o usuário estivesse fazendo seria perdida. Rolou para baixo? Você está de volta ao topo. Assistindo um vídeo? Ele recomeça. É assim que todas as aplicações web funcionaram por um bom tempo: sempre que um usuário interagia com a página, era como se ele tivesse fechado seu browser e aberto de novo. Isso não significa muito para o nosso exemplo, mas para páginas robustas e complexas em que o tempo de load pode demorar, não é algo eficiente para o browser, nem para o servidor.

**Se quisermos que alguma coisa mude na página sem a necessidade de reload da paǵina inteira, precisamos de Javascript** (não confunda com Java, que é uma linguagem totalmente diferente, e isso é uma outra história). Vamos tentar adicioná-lo então:

<iframe height="265" style="width: 100%;" scrolling="no" title="Barebones HTML+CSS+JS example" src="https://codepen.io/mturley/embed/gOOdeLY?height=265&theme-id=dark&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/mturley/pen/gOOdeLY'>Barebones HTML+CSS+JS example</a> by Mike Turley
  (<a href='https://codepen.io/mturley'>@mturley</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

Agora, quando digitarmos algum texto na caixa e clicarmos no botão “Add Item”, nosso novo item é adicionado à lista, e o item contador no topo da página recebe um update! Em um app real, nós também poderíamos adicionar código para enviar o novo item ao servidor no background, para que continue aparecendo da próxima vez em que fizermos o load da página.

Separar o JavaScript do HTML e CSS faz sentido neste exemplo simples.Tradicionalmente, interações mais complicadas seriam adicionadas da seguinte forma: é feito o load e display do HTML, e o JavaScript roda posteriormente para adicionar coisas a ele ou mudá-lo. Conforme as coisas vão ficando mais complexas, no entanto, nós vamos precisar manter um *track* melhor das coisas no nosso JavaScript.

Se continuássemos criando esse app de lista de compras , iríamos precisar adicionar, em seguida, botões para editar ou remover itens da lista. Digamos que nós escrevemos o JavaScript para um botão que remove um item, mas esquecemos de adicionar o código que faria o update do contador de itens no topo da página. De repente, temos um bug: depois de o usuário remover um item, o total no contador não vai bater com o da lista! Assim que notarmos o bug, resolvemos adicionando a mesma linha totalText.innerHTML do código do “Add Item” para o código do “Remove Item” . Agora nós temos o mesmo código duplicado em mais de um lugar. Mais para frente, suponhamos que queremos mudar esse código para que, no lugar de “(2 items)” no topo da página, leia-se “Items: 2”. Teríamos que garantir que atualizamos nos três lugares: mo HTML, no JavaScript para o botão “Add Item”, e no JavaScript para o botão “Remove Item”. Se não fizermos isso, teremos outro bug onde o texto muda abruptamente depois de alguma interação do usuário.

Neste exemplo, podemos ver como essas coisas podem ficar confusas rapidamente. Há formas de organizar nosso JavaScript para fazer com que esse tipo de problema seja contornável com maior facilidade, mas conforme as coisas ficam cada vez mais complexas, temos que reestruturar e reescrever as coisas para acompanhar. Enquanto HTML e JavaScript forem mantidos separados, será necessário muito esforço para garantir que tudo está em sincronia entre os dois. Essa é uma das razões porque novos frameworks JavaScript, como React, ganharam força: eles foram desenhados para mostrar as relações entre coisas como HTML e JavaScript. Para entender como isso funciona, precisamos primeiro entender um pouquinho de ciência computacional.

### Dois tipos de programação

O conceito chave para entendermos nesse momento envolve a distinção entre dois estilos comuns de programação. (Existem outros estilos de programação, é claro, mas estamos lidando apenas com dois deles aqui.) A maioria das linguagens de programação deságua em uma dessas duas, e algumas podem ser usadas de ambas as formas. É importante o conhecimento de ambos para entender o principal benefício do HTML-inJS da perspectiva de um desenvolvedor JavaScript.

- [**Programação imperativa**](https://pt.wikipedia.org/wiki/Programação_imperativa): Neste contexto, a palavra “imperativa” indica o ato de comandar o computador a realizar uma tarefa. Uma linha de código imperativo é bem parecida com uma [frase imperativa](https://www.learngrammar.net/a/examples-of-imperative-sentence) em Inglês: dá ao computador instruções específicas a seguir. Na programação imperativa, devemos dizer ao computador exatamente *como* realizar cada pequena tarefa que precisamos que ele faça. Emd desenvolvimento web, isso está começando a ser considerado “o jeito antigo” de fazer as coisas e é o que se faz em JavaScript básico, ou bibliotecas como JQuery. O javaScript no exemplo da minha lista de compras acima é código imperativo.

- - Imperativo: “Faça X, e então faça Y, e então faça Z”.
  - Exemplo: Quando o usuário seleciona este elemento, adicione a classe .selected a ele; e quando o usuário desselecionar, remova a classe .selected dele.

- [**Programação declarativa**](https://pt.wikipedia.org/wiki/Programação_declarativa): Essa é uma camada mais abstrata, acima da programação imperativa. Em vez de dar instruções ao computador, nós “declaramos” *o que* nós queremos que sejam os resultados depois que o computador realizar alguma ação. Nossas ferramentas (e.g. React) descobrem o *como* para nós automaticamente. Essas ferramentas são construídas com código imperativo em seu núcleo, com a qual não queremos nos importar de uma camada externa.

- - Declarativo: “O resultado deve ser XYZ. Faça o que for preciso para que seja possível.”
  - Exemplo: Este elemento tem uma classe .selected caso o usuário o selecione.


### HTML é uma linguagem declarativa

Vamos deixar o JavaScript um pouco de lado no momento. Eis um dado importante: **HTML sozinho é uma linguagem declarativa.** Em um arquivo HTML, vocẽ declarar algo como:

![img](https://lh4.googleusercontent.com/ER_Yu4IqIRDzD3KqcYtfpIv5jtePMOtM3m8EOGCXTzW9oZ5LZWOallBv2XahOuMZdt3E5jZm-Nnf31VMhLBK2wg1VHUWt4EwFp3BcL6BoKFk93-sLQX7OE3Y_gyP4VmSDrltbwog)

Quando o browser ler este HTML, vai descobrir estas **etapas imperativas** para você e executá-las:

1. Criar um elemento section
2. Criar um elemento heading do nível 1
3. Definir o texto interno ao elemento heading como “Hello”
4. Posicionar o elemento heading dentro do elemento section
5. Criar um elemento paragraph
6. Definir o texto interno ao elemento paragraph como “My name is Mike”
7. Posicionar o elemento paragraph dentro do elemento section
8. Posicionar o elemento section dentro de um documento
9. Exibir o documento na tela
Para um desenvolvedor web, os detalhes de como um browser executa essas tarefas é irrelevante; o importa mesmo é que ele executa. Esse é um exemplo perfeito das diferenças entre esses dois tipos de programação. Resumindo, **HTML é uma** [**abstração**](https://pt.wikipedia.org/wiki/Abstração) **declarativa envolvida pelo mecanismo de exibição imperativa do browser.** Ele cuida do “como” para que você se preocupe apenas com “o que”. Você pode viver tranquilamente escrevendo HTML declarativo porque o pessoal gente boa da Mozilla ou Google ou Apple escreveu o código imperativo para você quando construíram seu browser.


### JavaScript é uma linguagem imperativa

Nós demos uma olhada em um exemplo simples de JavaScript imperativo no caso da lista de compras acima, e eu cheguei a mencionar como a complexidade da funcionalidade de um app tem efeito cascata sobre o esforço necessário para implementá-la e potencializa o surgimento de bugs na implementação. Agora vamos dar uma olhada em uma funcionalidade um pouco mais complexa e ver como pode ser simplificada se usarmos uma abordagem declarativa.

Imagine uma webpage que contenha o seguinte:

- Uma lista de checkboxes com títulos, cada linha dessa lista muda para uma cor diferente quando seu item é selecionado
- Um texto no final como “1 de 4 selecionados” que deve ser atualizado quando os checkboxes mudam
- Um botão de “Select All” que deve ser desabilitado quando todos os checkboxes já estiverem selecionados
- Um botão de “Select None” que deve ser desabilitado se nenhum checkbox estiver selecionado

Aqui está a implementação utilizando HTML, CSS e JavaScript imperativos em sua forma pura.

<iframe height="265" style="width: 100%;" scrolling="no" title="Shopping List: HTML + JavaScript Example" src="https://codepen.io/mturley/embed/gOYveOp?height=265&theme-id=dark&default-tab=html,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/mturley/pen/gOYveOp'>Shopping List: HTML + JavaScript Example</a> by Mike Turley
  (<a href='https://codepen.io/mturley'>@mturley</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

Não tem muito código CSS nessa parte porque eu estou usando o sistema de design [PatternFly](https://www.patternfly.org/), que me dá a maioria do CSS que usei no exemplo. Eu importei o arquivo CSS deles nas configurações do CodePen.


### Nos mínimos detalhes

Para implementar essas funcionalidades com JavaScript imperativo, precisamos dar ao browser várias instruções granulares. Este é o equivalente na língua inglesa ao código no exemplo acima.

- No nosso HTML, declaramos a estrutura inicial da página:

- - Existem quatro elementos row, cada um contendo um checkbox. O terceiro checkbox está selecionado.
  - Existe um texto de legenda que diz “1 de 4 elementos selecionados”
  - Existe um botão “Select All” que está habilitado
  - Existe um botão “Select None” que está desabilitado

- No nosso JavaScript, escrevemos instruções para o que deve ser alterado quando cada um desses eventos ocorrer:

- - Quando um checkbox passar de desselecionado para selecionado:

  - - Encontre o elemento row contendo o checkbox e adicione a classe CSS .selected a ele.
    - Encontre todos os elementos checkbox na lista e conte quantos estão selecionados e quantos não estão.
    - Encontre o elemento texto de legenda e atualize com o número de checkbox selecionadas e o número total.
    - Encontre o elemento button “Select None” e o habilite se estiver desabilitado.
    - Se todos os checkbox estiverem selecionados agora, encontre o elemento button “Select All” e o desabilite.

  - Quando um checkbox passar de selecionado para desselecionado:

  - - Encontre o elemento row que contenha o checkbox e remova a classe .selected dele.
    - Encontre todos os elementos checkbox na lista e conte quantos estão selecionados e quantos não estão.
    - Encontre o elemento texto de legenda e o atualize com o números de selecionados e o número total.
    - Encontre o elemento button “Select All” e o habilite se estiver desabilitado.
    - Se todos os checkbox estiverem desselecionados agora, encontre o elemento button “Select None” e o desabilite.

  - Quando o botão “Select All” for clicado:

  - - Encontre todos os elementos checkbox na lista e selecione todos.
    - Encontre todos os elementos row na lista e adicione a classe .select a eles.
    - Encontre o elemento texto de legenda e o atualize.
    - Encontre o elemento button “Select All” e o desabilite.
    - Encontre o elemento button “Select None” e o habilite.

  - Quando o botão “Select None” for clicado:

  - - Encontre todos os elementos checkbox na lista e desselecione todos.
    - Encontre todos os elementos row na lista e remova a classe .select a eles.
    - Encontre o elemento texto de legenda e o atualize.
    - Encontre o elemento button “Select All” e o habilite.
    - Encontre o elemento button “Select None” e o desabilite.

Nossa. Isso foi muita informação, né? Bem, é bom nos lembramos de escrever código para cada uma dessas coisas, sem deixar passar nada. **Se esquecermos ou dermos mancada em qualquer dessas instruções, vamos ter um bug** em que os totais não vão bater com os checkboxes, ou um botão que está desabilitado não faz nada quando clicado, ou uma linha acaba ficando com a cor errada, ou qualquer outra coisa que não imaginamos e que não vamos descobrir até o usuário reclamar.

O maior problema aqui é que não existe uma [**fonte única de verdade**](https://pt.qwe.wiki/wiki/Single_source_of_truth) para o [**estado**](https://es.wikipedia.org/wiki/Estado) da nossa aplicação, que nesse caso é “quais checkboxes estão selecionados?”. Os checkboxes sabem se estão ou não selecionados, é claro, mas os estilos da linha também tem que saber, o texto de legenda tem q saber, e cada botão tem que saber. Cinco cópias dessa informação estão guardadas separadamente, todas em torno do HTML, e quando ela muda em qualquer desses lugares, o desenvolvedor JavaScript precisa encontrar e escrever código imperativo para manter os outros em sintonia.

E esse é só um exemplo simples ainda, de um dos menores componentes de uma página. Se isso parece uma dor de cabeça, imagine quão complexa e frágil fica uma aplicação quando você precisa escrever a coisa toda desse jeito. para muitas aplicações web modernas e complexas, não é uma solução escalável.


### Indo de encontro a uma fonte única de verdade

Ferramentas como o React nos permitem utilizar o JavaScript de uma forma declarativa. Assim como o HTML é uma abstração declarativa envolvida pelas instruções de exibição do browser, **o react é uma abstração declarativa envolvida em JavaScript.**

Lembra quando o HTML nos deixou focar apenas na estrutura da página e não em detalhes de como o browser vai exibir essa estrutura? Pois é, quando usamos React, podemos focar na estrutura novamente já que o definimos com base em informações guardadas em um único local. Quando a fonte de verdade mudar, o React vai atualizar a estrutura da página para nós automaticamente. Ele vai cuidar das etapas imperativas nos bastidores, assim como um browser faz com o HTML. (Apesar do React ser usado no exemplo aqui, o conceito não é único a ele e é usado por outros frameworks como o Vue.)

Vamos voltar para a nossa lista de checkboxes do exemplo anterior. Nesse caso, a verdade com que nos importamos é simples: quais checkboxes estão selecionadas? Outros detalhes na página (e.g. o que a legenda diz, a cor das linhas, se os botões estão habilitados ou não) são consequência direta da mesma verdade. Então para que eles precisam ter a própria cópia dessa informação? Eles deveriam simplesmente usar a fonte única de verdade como referência e tudo na página vai “simplesmente saber” quais checkboxes estão selecionadas e reagir de acordo com essa informação. Inclusive, pode-se dizer que os elementos row, texto de legenda e button deveriam ser capazes de *react* (reagir em inglês) automaticamente à ação de selecionar ou desselecionar um checkbox. (Entendeu o trocadilho?)


### Tell me what you want (what you really, really want)

Para implementar essa página usando React, nós podemos substituir a lista com algumas simples declarações de fatos:

- Existe uma lista de valores verdadeiro/falso chamada checkboxValues que representa cada checkbox selecionado.

- - Exemplo: checkboxValues = [falso, falso, verdadeiro, falso]
  - Essa lista representa o fato de que temos quatro checkboxes, e a terceira está selecionada.

- Para cada valor em checkboxValues, existe um elemento row que:

- - tem uma classe CSS chamada .selected se o valor foi verdadeiro, e
  - contêm um checkbox, que é selecionado se o valor é verdadeiro.

- Existe um elemento texto de legenda que contém a mensagem “{x} de {y} selecionados” onde {x} é um número de valores verdadeiros em checkboxValues e {y} é o número total de valores em checkboxValues.
- Existe um botão “Select All” que é habilitado quando há valores falsos em checkboxValues.
- Existe um botão “Select None” que é habilitado quando há valores verdadeiros em checkboxValues.
- Quando um checkbox é clicado, seu valor correspondente muda em checkboxValues.
- Quando o botão “Select All” é clicado, todos os valores em checkboxValues são definidos como verdadeiros.
- Quando o botão “Select None” é clicado, todos os valores em checkboxValues são definidos como falsos.

Você deve ter reparado que os últimos três itens ainda são instruções imperativas (“Quando isto acontecer, faça isso”), mas esse é o único código imperativo que precisaremos escrever. São três linhas de código, e elas vão atualizar a fonte única de verdade. O restantes dos elementos da lista são declarações (“existe um”) que agora serão construídos diretamente na definição da estrutura da paǵina. Para tornar isso possível, escrevemos nossos elementos com uma [sintaxe](https://www.soportugues.com.br/secoes/sint/) especial do JavaScript dada pelo React chamada JSX, que se parece muito com o HTML mas pode conter lógica JavaScript. Isso nos dá o poder de misturar lógicas como “if” e “for each” com a estrutura HTML, dessa forma a estrutura pode ser diferente dependendo do conteúdo dos checkboxValues em um dado momento.

Aqui está a mesma lista de compras do exemplo acima, dessa vez implementado com React:

<iframe height="265" style="width: 100%;" scrolling="no" title="Shopping List: React Example" src="https://codepen.io/mturley/embed/WNeyWOO?height=265&theme-id=dark&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/mturley/pen/WNeyWOO'>Shopping List: React Example</a> by Mike Turley
  (<a href='https://codepen.io/mturley'>@mturley</a>) on <a href='https://codepen.io'>CodePen</a>.
</iframe>

JSX é bem estranho, não há dúvidas. Quando eu dei de cara com ele pela primeira vez me parece muito errado. Minha reação inicial foi “Que doideira é essa? HTML não funciona com JavaScript!”. E eu não estava sozinho. Dito isso, não é HTML, mas sim um código [JavaScript fantasiado para parecer HTML.](https://pt-br.reactjs.org/) Também é uma ferramenta muito poderosa.

Lembra da lista de 20 instruções imperativas lá em cima? Agora podemos ter três. Pela bagatela de definir nosso HTML dentro do nosso JavaScript, o resto delas sai de graça. **O React simplesmente faz elas por nós** sempre que o checkboxValues mudar.

Com esse código, agora fica impossível o texto de legenda não bater com os checkboxes, ou a cor de uma linha estar errada, ou o botão estar habilitado quando não deveria estar. Existe uma categoria inteira de bugs que agora são impossíveis de termos em nosso app: **fontes de verdade estarem dessincronizadas.** Tudo flui de uma fonte única de verdade, e nós desenvolvedores podemos escrever menos código e dormir tranquilos à noite. Bem, pelo menos os desenvolvedores JavaScript podem…


### É um trade-off

Conforme uma aplicação web vai ficando mais complexa, manter a clássica separação de conceitos entre HTML e JavaScript acaba cobrando um preço cada vez mais alto. o HTML foi originalmente desenhado para documentos estáticos, e para adicionar funcionalidades com interações mais complexas a esses documentos, JavaScript imperativo tem que acompanhar mais coisas e ficando mais confuso e frágil.


#### A vantagem: previsibilidade, reusabilidade e composição

A habilidade de usar uma fonte única de verdade é o benefício mais importante deste padrão, mas o trade-off nos dá outros benefícios também.Definir os elementos da nossa página com código JavaScript quer dizer que podemos transformar blocos de informação em componentes reutilizáveis, tirando a necessidade de copiar e colar o mesmo HTML em vários lugares. Se precisarmos mudar um componente, podemos fazer essa mudança um único lugar e tudo na nossa aplicação será atualizado (ou em muita aplicações, se estamos publicando componentes reutilizáveis para outras equipes).

Podemos pegar esses componentes simples e combiná-los como tijolos de lEGO, criando um componente mais complexo e útil, sem deixá-los difíceis de trabalhar. E se estivermos usando componentes criados por outras pessoas, podemos facilmente atualizá-los quando novas melhorias ou correções de bugs forem lançadas, sem ter que reescrever nosso código.


#### A desvantagem: é JavaScript do início ao fim

Todos esses benefícios vêm com um preço. Há boas razões para as pessoas ainda valorizarem a permanência do HTML e do JavaScript separados, e para ter esses outros benefícios, precisamos combiná-los em um único documento. Como eu disse lá em cima, distanciar-se dos arquivos HTML complica o fluxo de trabalho de alguém que não precisava se preocupar com o JavaScript antes. Isso quer dizer que alguém que antes conseguia fazer alterações em um aplicação por conta própria, agora podem precisar aprender habilidades adicionais complexas para mantê-la sozinho.

Pode haver algumas desvantagens técnicas também. Por exemplo, algumas ferramentas como “linters” e “parsers” esperam HTML convencional, e alguns plugins de imperativo JavaScript alheio a esses dois pode ser mais custoso de trabalhar. Além disso, JavaScript não é melhor linguagem que existe; é simplesmente o que temos nos nossos browsers. Novos ferramentas e funcionalidades estão fazendo o mesmo trabalho só que melhor, mas ainda tem alguns gargalos que precisamos aprender antes de conseguirmos ser produtivos com elas.

Outro problema em potencial é que, quando a estrutura semântica de uma página está quebrada em componentes abstratos, é cômodos para os desenvolvedores simplesmente pararem de pensar sobre exatamente quais elementos HTML estão sendo gerados no final. Tags específicas de HTML como `<section>` e `<aside>` tem significados semânticos específicos e se perdem quando usamos tags genéricas como `<div>` e `<span>`, ainda que elas sejam visualmente idênticas em uma página. Isso é especialmente importante para acessibilidade. Por exemplo, essas escolhas vão impactar a forma como o software leitor da tela se comporta para usuários com visão debilitada. Pode não ser a parte mais empolgante, mas desenvolvedores JavaScript devem sempre se lembrar que a semântica HTML é a [parte mais importante](https://www.petelambert.com/journal/html-is-the-web/) de uma página web.


### Use apenas se for te ajudar, não porque “está na moda”

Virou tendência entre os desenvolvedores procurar frameworks para todos os projetos. Algumas pessoas acreditam que a separação entre HTML e JavaScript está obsoleta, mas não é verdade. para um site estático simples, que não precisa de muita interação com o usuário, não vale o esforço. Por mais que os fãs de carteirinha do React possam discordar comigo, **mas se o seu JavaScript está simplesmente criando uma página sem interatividade, você não deveria estar usando JavaScript.** JavaScript não carrega na mesma velocidade que HTML puro, então se você não tem um desenvolvedor consideravelmente experiente ou código aprimorado para ser mais confiável, vai te atrapalhar mais que ajudar.

Você também não precisa criar um site inteiramente em React! Ou Vue! Ou Qualquer coisa! Muita gente não sabe disso porque todos os tutoriais que eu vi por aí mostram como usar React para o projeto inteiro. Se você tem um widget pequenininho em um site simples, você pode usar React para esse componente. Nem sempre você vai precisar se preocupar com webpack ou Redux ou Gatsby ou qualquer outras porcaria que as pessoas vão chamar de “melhores práticas” para a sua aplicação React.

Para uma aplicação relativamente complexa, programação declarativa certamente compensa. É uma mudança de paradigma que empoderou desenvolvedores no mundo todo a construir softwares incríveis, robustos e confiáveis com segurança e sem a necessidade de suar tanto a camisa. O React é particularmente a melhor solução possível para esses problemas? Não. Ele vai ser substituído por alguma coisa? Em algum momento. mas programação declarativa não vai sumir tão cedo, e a próxima coisa que surgir provavelmente vai fazer isso melhor.


### O que é esse negócio de CSS-in-JS?

Eu que não vou mexer com esse assunto por agora.
